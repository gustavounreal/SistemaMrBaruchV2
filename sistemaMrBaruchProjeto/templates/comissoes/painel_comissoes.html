{% extends 'base/base.html' %}
{% load static %}

{% block title %}Painel de Comissões - Mr. Baruch{% endblock %}

{% block content %}
<div class="container-fluid px-4 py-4">
  
  <!-- Header -->
  <div class="row align-items-center mb-4">
    <div class="col-md-8">
      <h2 class="fw-bold text-dark mb-1">
        <i class="bi bi-trophy-fill text-primary me-2"></i>Painel de Comissões
      </h2>
      <p class="text-muted mb-0">Gestão completa de comissões por leads, vendas e serviços</p>
    </div>
    <div class="col-md-4 text-md-end mt-3 mt-md-0">
      <a href="{% url 'accounts:dashboard' %}" class="btn btn-outline-secondary rounded-pill">
        <i class="bi bi-arrow-left-circle me-1"></i> Voltar ao Dashboard
      </a>
    </div>
  </div>

  <!-- Cards de Estatísticas Gerais -->
  <div class="row g-4 mb-4">
    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="text-muted text-uppercase small mb-1">Total Comissões</h6>
              <h3 class="fw-bold text-primary mb-0">
                R$ {{ total_comissoes.total|floatformat:2|default:"0,00" }}
              </h3>
              <small class="text-muted">{{ total_comissoes.quantidade|default:0 }} registros</small>
            </div>
            <i class="bi bi-cash-stack fs-1 text-primary opacity-25"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="text-muted text-uppercase small mb-1">Comissões Pagas</h6>
              <h3 class="fw-bold text-success mb-0">{{ total_comissoes.pagas|default:0 }}</h3>
              <small class="text-muted">Processadas</small>
            </div>
            <i class="bi bi-check-circle-fill fs-1 text-success opacity-25"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="text-muted text-uppercase small mb-1">Comissões Pendentes</h6>
              <h3 class="fw-bold text-warning mb-0">{{ total_comissoes.pendentes|default:0 }}</h3>
              <small class="text-muted">Aguardando pagamento</small>
            </div>
            <i class="bi bi-clock-fill fs-1 text-warning opacity-25"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h6 class="text-muted text-uppercase small mb-1">Comissões Mês Atual</h6>
              <h3 class="fw-bold text-info mb-0">
                R$ {{ comissoes_mes.total|floatformat:2|default:"0,00" }}
              </h3>
              <small class="text-muted">{{ comissoes_mes.quantidade|default:0 }} este mês</small>
            </div>
            <i class="bi bi-calendar-month fs-1 text-info opacity-25"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Módulos de Comissões -->
  <div class="row mb-3">
    <div class="col-12">
      <h4 class="fw-bold text-dark mb-1">
        <i class="bi bi-grid-3x3-gap-fill text-primary me-2"></i>Tipos de Comissões
      </h4>
      <p class="text-muted small">Acesse os painéis específicos de cada tipo de comissão</p>
    </div>
  </div>

  <div class="row g-4">
    <!-- Comissões de Leads -->
    <div class="col-lg-4 col-md-6">
      <div class="card h-100 border-0 shadow-sm hover-card">
        <div class="card-body text-center p-4">
          <i class="bi bi-person-check-fill text-primary fs-1 mb-3"></i>
          <h5 class="fw-bold mb-2">Comissões de Leads</h5>
          <p class="text-muted small mb-3">
            Comissões geradas por levantamentos de leads com pagamento PIX confirmado via webhook ASAAS.
          </p>
          <div class="alert alert-light border mb-3">
            <small class="text-muted d-block mb-1">Valor Atual Configurado:</small>
            <strong class="text-primary fs-5">R$ {{ valor_comissao_atual }}</strong>
            <small class="text-muted d-block mt-1">por levantamento</small>
          </div>
          <a href="{% url 'comissoes:painel_comissoes_leads' %}" class="btn btn-primary w-100 rounded-pill">
            <i class="bi bi-arrow-right-circle me-1"></i> Acessar Painel
          </a>
        </div>
      </div>
    </div>

    <!-- Comissões de Vendas (Futuro) -->
    <div class="col-lg-4 col-md-6">
      <div class="card h-100 border-0 shadow-sm">
        <div class="card-body text-center p-4">
          <i class="bi bi-cart-check-fill text-success fs-1 mb-3"></i>
          <h5 class="fw-bold mb-2">Comissões de Vendas</h5>
          <p class="text-muted small mb-3">
            Comissões sobre vendas de serviços completos e contratos fechados com clientes.
          </p>
          <div class="alert alert-secondary border mb-3">
            <small class="text-muted">Em desenvolvimento</small>
          </div>
          <button class="btn btn-outline-secondary w-100 rounded-pill" disabled>
            <i class="bi bi-lock-fill me-1"></i> Em Breve
          </button>
        </div>
      </div>
    </div>

    <!-- Comissões de Captadores (Futuro) -->
    <div class="col-lg-4 col-md-6">
      <div class="card h-100 border-0 shadow-sm">
        <div class="card-body text-center p-4">
          <i class="bi bi-people-fill text-warning fs-1 mb-3"></i>
          <h5 class="fw-bold mb-2">Comissões de Captadores</h5>
          <p class="text-muted small mb-3">
            Comissões para captadores externos que trazem leads qualificados para a base.
          </p>
          <div class="alert alert-secondary border mb-3">
            <small class="text-muted">Em desenvolvimento</small>
          </div>
          <button class="btn btn-outline-secondary w-100 rounded-pill" disabled>
            <i class="bi bi-lock-fill me-1"></i> Em Breve
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Configurações Rápidas -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-light border-0">
          <h5 class="mb-0">
            <i class="bi bi-gear-wide-connected text-secondary me-2"></i>Configurações de Comissões
          </h5>
        </div>
        <div class="card-body">
          <p class="text-muted mb-3">
            Para ajustar valores, regras e parâmetros do sistema de comissões, acesse o Painel de Configurações.
          </p>
          <a href="{% url 'core:painel_configuracoes' %}" class="btn btn-outline-secondary rounded-pill">
            <i class="bi bi-sliders me-1"></i> Ir para Configurações
          </a>
        </div>
      </div>
    </div>
  </div>

</div>

<style>
.hover-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.hover-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.15) !important;
}
</style>
{% endblock %}
